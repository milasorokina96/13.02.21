<script>

    function fibonacci() {
        const cash = new Map();

        return function(arg) {
            let result = [];

            if(cash.has(arg)){
                return `You have this arg in cash. The result is ${cash.get(arg)}`
            }

            function* generateFib() {
                let firstValue = 0;
                let secondValue = 1;
                let index = 0;

                while(index <= arg){
                    yield firstValue;
                    const sum = firstValue + secondValue;
                    firstValue = secondValue;
                    secondValue = sum;
                    index++;

                }
            }

            const generator = generateFib();

            for(let value of generator) {
                result.push(value);
            }

            cash.set(arg, result);

            return result;
        }

    }

    const f = fibonacci();
    console.log(f(10));
    console.log(f(10));

</script>